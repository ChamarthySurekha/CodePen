var KeyBindings=function(){var a={lastKeyPressed:0,altKeyPressedPreviously:!1,HTMLeditor:"",CSSeditor:"",JSeditor:"",init:function(a,b,c){this.bindKeys();this.HTMLeditor=a;this.CSSeditor=b;this.JSeditor=c},giveEditorFocus:function(b){b.focus();a.setCursorToEnd(b)},setCursorToEnd:function(a){var b=a.getValue();a.setCursor(b.length,b.length,!0)},bindKeys:function(){$(window).on("keydown keypress",function(b){a.lastKeyPressed==18||a.lastKeyPressed==91?this.altKeyPressedPreviously=!0:this.altKeyPressedPreviously=!1;a.lastKeyPressed!=b.keyCode&&(a.lastKeyPressed=b.keyCode);stop=!1;if(altKeyPressedPreviously)if(b.keyCode==49){stop=!0;a.giveEditorFocus(a.HTMLeditor)}else if(b.keyCode==50){stop=!0;a.giveEditorFocus(a.CSSeditor)}else if(b.keyCode==51){stop=!0;a.giveEditorFocus(a.JSeditor)}else if(b.keyCode==67){console.log("compile");CodeRenderer.codeChanged()}else if(b.keyCode==70)console.log("fork");else if(b.keyCode==71)console.log("gist");else if(b.keyCode==78){console.log("create new tinker box in new tab");stop=!0}else if(b.keyCode==83){console.log("save");stop=!0}if(stop){$.Event(b).stopPropagation();return!1}})}};return a}();(function(a){var b=a(window),c=a("body"),d=a(".boxes"),e=a(".box-html"),f=a(".box-css"),g=a(".box-js"),h=a(".result"),i=a(".top-boxes"),j=a(".box-html, .box-css, .box-js"),k=a("#handle-1"),l=a("#handle-2"),m=a("#handle-3");a(".settings-nub").on("click",function(b){b.preventDefault();a(this).toggleClass("open").next().toggleClass("open")});b.resize(function(){var a=c.height()-100;j.height(a/2);h.height(a/2);m.css("top","50%")}).trigger("resize");a("#js-select").chosen();k.draggable({containment:"parent",axis:"x",drag:function(a,b){var c=b.position.left/i.width()*100;e.css("width",c+"%");var d=100-c,h=d/2;f.css("width",h+"%");g.css("width",h+"%");l.css("left",c+h+"%")}});l.draggable({containment:"parent",axis:"x",drag:function(a,b){var c=100-b.position.left/i.width()*100;g.css("width",c+"%");var d=100-c,h=d/2;f.css("width",h+"%");e.css("width",h+"%");k.css("left",h+"%")}});m.draggable({containment:"parent",axis:"y",drag:function(a,b){var c=b.position.top/d.height()*100;j.css("height",b.position.top+"px");h.css("height",100-c+"%")}});TBDB.init();a("#slug").val(TBDB.name);a("#html").html(TBDB.html);a("#css").html(TBDB.css);a("#js").html(TBDB.js);TBDB.getOption("css","prefixFree")!=""&&a("#prefix-free").prop("checked",!0);codeChanged=function(a,b){TBDB.setEditorValue(a.getOption("mode"),a.getValue());TBDB.compileInRealTime&&CodeRenderer.codeChanged()};var n=CodeMirror.fromTextArea(document.getElementById("html"),{lineNumbers:!1,value:TBDB.html,mode:"xml",tabSize:2,onChange:this.codeChanged}),o=CodeMirror.fromTextArea(document.getElementById("css"),{lineNumbers:!1,value:TBDB.css,mode:"css",tabSize:2,onChange:this.codeChanged}),p=CodeMirror.fromTextArea(document.getElementById("js"),{lineNumbers:!1,value:TBDB.js,mode:"javascript",tabSize:2,onChange:this.codeChanged});CodeRenderer.init();a('input[name="html-preprocessor"]').on("click",function(){TBDB.setHTMLOption("preprocessor",this.value)});a('input[name="css-preprocessor"]').on("click",function(){TBDB.setCSSOption("preprocessor",this.value)});a("#prefix-free").on("click",function(){TBDB.setCSSOption("prefixFree",a(this).is(":checked"))});a('input[name="js-preprocessor"]').on("click",function(){TBDB.setCSSOption("preprocessor",this.value)});KeyBindings.init(n,o,p)})(jQuery);